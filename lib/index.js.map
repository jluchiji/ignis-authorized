{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;qBAkBwB,eAAe;;;;;oBAXf,QAAQ;;;;qBACR,SAAS;;;;sBACT,UAAU;;;;uBACV,WAAW;;;;0BAGX,YAAY;;;;;;;;AAKrB,SAAS,eAAe,CAAC,KAAK,EAAE;;AAE7C,OAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;;AAGnC,OAAK,iBAAU,GAAG,IAAI,GAAG,EAAE,CAAC;;;AAG5B,OAAK,CAAC,GAAG,CAAC,IAAI,sBAAS,CAAC;;;AAGxB,OAAK,CAAC,MAAM,CAAC,IAAI,oBAAS,CAAC;AAC3B,OAAK,CAAC,MAAM,CAAC,KAAK,GAAI,mBAAM,IAAI,CAAC,KAAK,CAAC,CAAC;AACxC,OAAK,CAAC,MAAM,CAAC,MAAM,sBAAS,CAAC;AAC7B,OAAK,CAAC,MAAM,CAAC,IAAI,GAAK,UAAS,GAAG,EAAE;AAAE,WAAO,wBAAW,IAAI,CAAC,GAAG,CAAC,CAAC;GAAE,CAAC;CACtE","file":"index.js","sourcesContent":["/**\n * access/index.js\n *\n * @author  Denis Luchkin-Zhou <denis@ricepo.com>\n * @license MIT\n */\n\nimport Role        from './role';\nimport Scope       from './scope';\nimport Action      from './action';\nimport Factory     from './factory';\nimport {__scopes}  from './scope';\n\nimport Authorized  from 'authorized';\n\n/*!\n * Ignis extension\n */\nexport default function accessExtension(ignis) {\n  /* Root acess-control namespace */\n  ignis.access = Object.create(null);\n\n  /* Scope storage */\n  ignis[__scopes] = new Map();\n\n  /* Attach Authorized middlewares */\n  ignis.pre.push(Factory);\n\n  /* Attach access-control callbacks */\n  ignis.access.role   = Role;\n  ignis.access.scope  = Scope.bind(ignis);\n  ignis.access.action = Action;\n  ignis.access.view   = function(req) { return Authorized.view(req); };\n}\n"],"sourceRoot":"/source/"}