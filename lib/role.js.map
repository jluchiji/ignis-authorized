{"version":3,"sources":["role.js"],"names":[],"mappings":";;;;;;;;;;;;qBAoBwB,IAAI;;;;;wBAbJ,UAAU;;;;0BACV,YAAY;;;;yBAER,YAAY;;;;;;;;;;AAUzB,SAAS,IAAI,CAAC,IAAI,EAAE,QAAQ,EAAE;AAC3C,UAAQ,GAAG,4BAAY,QAAQ,CAAC,CAAC;;AAEjC,MAAI,OAAO,GAAG,iBAAC,GAAG,EAAE,IAAI,EAAK;AAC3B,YAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;GAC3B,CAAC;AACF,MAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;AACnB,WAAO,GAAG,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAK;AAC5B,cAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KAC1B,CAAC;GACH;;AAED,0BAAW,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;CAChC","file":"role.js","sourcesContent":["/**\n * access/role.js\n *\n * @author  Denis Luchkin-Zhou <denis@ricepo.com>\n * @license MIT\n */\n\nimport Bluebird    from 'bluebird';\nimport Authorized  from 'authorized';\n\nimport { unpromisify } from 'ignis-util';\n\n\n/**\n * role(2)\n *\n * @description                Specifies the callback for verifying a role.\n * @param          {name}      Name of the role without entity.\n * @param          {callback}  Promise-generating callback function.\n */\nexport default function role(name, callback) {\n  callback = unpromisify(callback);\n\n  let wrapped = (req, done) => {\n    callback(null, req, done);\n  };\n  if (/\\./.test(name)) {\n    wrapped = (ent, req, done) => {\n      callback(ent, req, done);\n    };\n  }\n\n  Authorized.role(name, wrapped);\n}\n"],"sourceRoot":"/source/"}