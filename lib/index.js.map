{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;;;;;;qBAkBwB,eAAe;;;;;oBAXf,QAAQ;;;;qBACR,SAAS;;;;sBACT,UAAU;;;;uBACV,WAAW;;;;0BAGX,YAAY;;;;;;;;AAKrB,SAAS,eAAe,CAAC,KAAK,EAAE;AAC7C,OAAK,CAAC,IAAI,CAAC,YAAW;;AAEpB,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;;AAGlC,QAAI,iBAAU,GAAG,IAAI,GAAG,EAAE,CAAC;;;AAG3B,QAAI,CAAC,SAAS,CAAC,IAAI,sBAAS,CAAC;;;AAG7B,QAAI,CAAC,MAAM,CAAC,IAAI,oBAAS,CAAC;AAC1B,QAAI,CAAC,MAAM,CAAC,KAAK,GAAI,mBAAM,IAAI,CAAC,IAAI,CAAC,CAAC;AACtC,QAAI,CAAC,MAAM,CAAC,MAAM,sBAAS,CAAC;AAC5B,QAAI,CAAC,MAAM,CAAC,IAAI,GAAK,wBAAW,IAAI,CAAC;GACtC,CAAC,CAAC;CAEJ","file":"index.js","sourcesContent":["/**\n * access/index.js\n *\n * @author  Denis Luchkin-Zhou <denis@ricepo.com>\n * @license MIT\n */\n\nimport Role        from './role';\nimport Scope       from './scope';\nimport Action      from './action';\nimport Factory     from './factory';\nimport {__scopes}  from './scope';\n\nimport Authorized  from 'authorized';\n\n/*!\n * Ignis extension\n */\nexport default function accessExtension(Ignis) {\n  Ignis.init(function() {\n    /* Root acess-control namespace */\n    this.access = Object.create(null);\n\n    /* Scope storage */\n    this[__scopes] = new Map();\n\n    /* Attach Authorized middlewares */\n    this.factories.push(Factory);\n\n    /* Attach access-control callbacks */\n    this.access.role   = Role;\n    this.access.scope  = Scope.bind(this);\n    this.access.action = Action;\n    this.access.view   = Authorized.view;\n  });\n\n}\n"],"sourceRoot":"/source/"}